<script setup>
import { ref, onMounted } from 'vue'
import { useRoute, useRouter } from 'vue-router'

const route = useRoute()
const router = useRouter()
const item = ref({})
const product = ref({})

onMounted(async () => {
  try {
    const response = await fetch('https://98ec1f7320b02e63.mokky.dev/operation_1942')
    const data = await response.json()
    item.value = data.find((el) => el.id === parseInt(route.params.id))
    product.value = {
      styles: item.value.styles || {},
    }
    if (!item.value) {
      throw new Error('Элемент не найден')
    }
  } catch (error) {
    console.error('Ошибка загрузки данных:', error)
  }
})

const goToHome = () => {
  try {
    // Указываем имя маршрута и якорь
    router.push({
      name: 'home',
      hash: '#operation1942'
    })
  } catch (error) {
    console.error('Ошибка перехода:', error)
  }
}
</script>
<!-- <div class="max-w-520 mb-93 hidden"></div>
    <div class="max-w-522 mb-69 hidden"></div> -->

<template>
  <div class="w-1640 mx-auto pt-179">
    <div class="flex justify-between">
      <div v-if="item.image && (item.image.large || typeof item.image === 'string')">
        <img
          :src="typeof item.image === 'string' ? item.image : item.image.large"
          alt="Изображение"
          class="max-w-1080 object-cover"
        />
      </div>
      <div>
        <h1
          class="text-44 font-ptsans leading-57 mb-10"
          :class="item.styles ? item.styles.large : ''"
        >
          {{ item.name }}
        </h1>
        <p
          class="max-w-520 font-montserrat text-2xl leading-29 mb-10 pre-wrap"
          :class="item.styles ? item.styles.gap : ''"
        >
          {{ item.description }}
        </p>
        <button
          @click="goToHome"
          class="bg-E41D1D text-white flex gap-5 items-center font-montserrat text-2xl py-31 w-520 justify-center rounded-50"
        >
          <img src="/public/arrow-back.svg" alt="arrow-back" />
          Назад
        </button>
      </div>
    </div>
  </div>
</template>

<style scoped>
.pre-wrap {
  white-space: pre-wrap; /* сохраняет переносы строк */
  word-break: break-word;
}
</style>
